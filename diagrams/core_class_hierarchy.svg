<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="744px" preserveAspectRatio="none" style="width:656px;height:744px;background:#00000000;" version="1.1" viewBox="0 0 656 744" width="656px" zoomAndPan="magnify"><defs><filter height="300%" id="f3hmc2ms3qxe7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[553662192d0d888fd585c6d5962c390b]
class StreamLoader--><a href="../com/adform/streamloader/StreamLoader.html" target="_top" title="StreamLoader" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/StreamLoader.html" xlink:show="new" xlink:title="StreamLoader" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="StreamLoader" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="245" y="8"/><ellipse cx="260" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M262.9688,29.6406 Q262.3906,29.9375 261.75,30.0781 Q261.1094,30.2344 260.4063,30.2344 Q257.9063,30.2344 256.5781,28.5938 Q255.2656,26.9375 255.2656,23.8125 Q255.2656,20.6875 256.5781,19.0313 Q257.9063,17.375 260.4063,17.375 Q261.1094,17.375 261.75,17.5313 Q262.4063,17.6875 262.9688,17.9844 L262.9688,20.7031 Q262.3438,20.125 261.75,19.8594 Q261.1563,19.5781 260.5313,19.5781 Q259.1875,19.5781 258.5,20.6563 Q257.8125,21.7188 257.8125,23.8125 Q257.8125,25.9063 258.5,26.9844 Q259.1875,28.0469 260.5313,28.0469 Q261.1563,28.0469 261.75,27.7813 Q262.3438,27.5 262.9688,26.9219 L262.9688,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="274" y="28.1543">StreamLoader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="246" x2="364" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="54.2104">start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="251" y="67.0151">stop()</text></a><!--MD5=[13bffe78371c1c8886d9a05fce9fab64]
class KafkaSource--><a href="../com/adform/streamloader/KafkaSource.html" target="_top" title="KafkaSource" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/KafkaSource.html" xlink:show="new" xlink:title="KafkaSource" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="KafkaSource" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="108.5" y="166"/><ellipse cx="131.15" cy="182" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M134.1188,187.6406 Q133.5406,187.9375 132.9,188.0781 Q132.2594,188.2344 131.5563,188.2344 Q129.0563,188.2344 127.7281,186.5938 Q126.4156,184.9375 126.4156,181.8125 Q126.4156,178.6875 127.7281,177.0313 Q129.0563,175.375 131.5563,175.375 Q132.2594,175.375 132.9,175.5313 Q133.5563,175.6875 134.1188,175.9844 L134.1188,178.7031 Q133.4938,178.125 132.9,177.8594 Q132.3063,177.5781 131.6813,177.5781 Q130.3375,177.5781 129.65,178.6563 Q128.9625,179.7188 128.9625,181.8125 Q128.9625,183.9063 129.65,184.9844 Q130.3375,186.0469 131.6813,186.0469 Q132.3063,186.0469 132.9,185.7813 Q133.4938,185.5 134.1188,184.9219 L134.1188,187.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="146.85" y="186.1543">KafkaSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="109.5" x2="234.5" y1="198" y2="198"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="114.5" y="212.2104">poll(): Kafka records</text></a><!--MD5=[bb0076f36699579ceee0ebce73764b72]
class Sink--><a href="../com/adform/streamloader/Sink.html" target="_top" title="Sink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/Sink.html" xlink:show="new" xlink:title="Sink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="116.8281" id="Sink" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="270.5" y="134"/><ellipse cx="420.75" cy="150" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M416.6719,145.7656 L416.6719,143.6094 L424.0625,143.6094 L424.0625,145.7656 L421.5938,145.7656 L421.5938,153.8438 L424.0625,153.8438 L424.0625,156 L416.6719,156 L416.6719,153.8438 L419.1406,153.8438 L419.1406,145.7656 L416.6719,145.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="26" x="441.25" y="154.1543">Sink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="271.5" x2="604.5" y1="166" y2="166"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="276.5" y="180.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="276.5" y="193.0151">assignPartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="276.5" y="205.8198">revokePartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="276.5" y="218.6245">write(record)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="276.5" y="231.4292">heartbeat()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="276.5" y="244.2339">close()</text></a><!--MD5=[30e4d2ee8532d5e65a7e7139bdb5ba17]
class FileSink--><a href="../com/adform/streamloader/file/FileSink.html" target="_top" title="FileSink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileSink.html" xlink:show="new" xlink:title="FileSink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileSink" style="stroke: #A80036; stroke-width: 1.5;" width="256" x="310" y="311"/><ellipse cx="410.25" cy="327" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M413.2188,332.6406 Q412.6406,332.9375 412,333.0781 Q411.3594,333.2344 410.6563,333.2344 Q408.1563,333.2344 406.8281,331.5938 Q405.5156,329.9375 405.5156,326.8125 Q405.5156,323.6875 406.8281,322.0313 Q408.1563,320.375 410.6563,320.375 Q411.3594,320.375 412,320.5313 Q412.6563,320.6875 413.2188,320.9844 L413.2188,323.7031 Q412.5938,323.125 412,322.8594 Q411.4063,322.5781 410.7813,322.5781 Q409.4375,322.5781 408.75,323.6563 Q408.0625,324.7188 408.0625,326.8125 Q408.0625,328.9063 408.75,329.9844 Q409.4375,331.0469 410.7813,331.0469 Q411.4063,331.0469 412,330.7813 Q412.5938,330.5 413.2188,329.9219 L413.2188,332.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="430.75" y="331.1543">FileSink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="311" x2="565" y1="343" y2="343"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="316" y="357.2104">partitionGrouping: TopicPartition =&gt; String</text></a><!--MD5=[4559e451c9ce63b7bac6a4b27b898818]
class FileStorage--><a href="../com/adform/streamloader/file/storage/FileStorage.html" target="_top" title="FileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/FileStorage.html" xlink:show="new" xlink:title="FileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="91.2188" id="FileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="166.5" y="424"/><ellipse cx="272.25" cy="440" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M268.1719,435.7656 L268.1719,433.6094 L275.5625,433.6094 L275.5625,435.7656 L273.0938,435.7656 L273.0938,443.8438 L275.5625,443.8438 L275.5625,446 L268.1719,446 L268.1719,443.8438 L270.6406,443.8438 L270.6406,435.7656 L268.1719,435.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="292.75" y="444.1543">FileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="167.5" x2="456.5" y1="456" y2="456"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="172.5" y="470.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="172.5" y="483.0151">recover()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="172.5" y="495.8198">commitFile(file, offsets)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="172.5" y="508.6245">committedPositions(partitions): stream positions</text></a><!--MD5=[2aa31e69067119087dfb94d8fcd9459c]
class InDataOffsetFileStorage--><a href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" target="_top" title="InDataOffsetFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" xlink:show="new" xlink:title="InDataOffsetFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="6" y="581.5"/><ellipse cx="21" cy="597.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M21.1094,592.8438 L19.9531,597.9219 L22.2813,597.9219 L21.1094,592.8438 Z M19.625,590.6094 L22.6094,590.6094 L25.9688,603 L23.5156,603 L22.75,599.9375 L19.4688,599.9375 L18.7188,603 L16.2813,603 L19.625,590.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="148" x="35" y="601.6543">InDataOffsetFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="185" y1="613.5" y2="613.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="12" y="627.7104">storeFile(file)</text></a><!--MD5=[488022651e633c44504f67c9abfc605a]
class TwoPhaseCommitFileStorage--><a href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" target="_top" title="TwoPhaseCommitFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" xlink:show="new" xlink:title="TwoPhaseCommitFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="211" x="221.5" y="575"/><ellipse cx="236.5" cy="591" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M236.6094,586.3438 L235.4531,591.4219 L237.7813,591.4219 L236.6094,586.3438 Z M235.125,584.1094 L238.1094,584.1094 L241.4688,596.5 L239.0156,596.5 L238.25,593.4375 L234.9688,593.4375 L234.2188,596.5 L231.7813,596.5 L235.125,584.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="179" x="250.5" y="595.1543">TwoPhaseCommitFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="222.5" x2="431.5" y1="607" y2="607"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="227.5" y="621.2104">stageFile(file): staging</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="227.5" y="634.0151">storeFile(staging)</text></a><!--MD5=[6b4f901cc76541060ec59946271318ef]
class LocalFileStorage--><a href="../com/adform/streamloader/file/storage/LocalFileStorage.html" target="_top" title="LocalFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/LocalFileStorage.html" xlink:show="new" xlink:title="LocalFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="LocalFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="259.5" y="701"/><ellipse cx="274.5" cy="717" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M277.4688,722.6406 Q276.8906,722.9375 276.25,723.0781 Q275.6094,723.2344 274.9063,723.2344 Q272.4063,723.2344 271.0781,721.5938 Q269.7656,719.9375 269.7656,716.8125 Q269.7656,713.6875 271.0781,712.0313 Q272.4063,710.375 274.9063,710.375 Q275.6094,710.375 276.25,710.5313 Q276.9063,710.6875 277.4688,710.9844 L277.4688,713.7031 Q276.8438,713.125 276.25,712.8594 Q275.6563,712.5781 275.0313,712.5781 Q273.6875,712.5781 273,713.6563 Q272.3125,714.7188 272.3125,716.8125 Q272.3125,718.9063 273,719.9844 Q273.6875,721.0469 275.0313,721.0469 Q275.6563,721.0469 276.25,720.7813 Q276.8438,720.5 277.4688,719.9219 L277.4688,722.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="288.5" y="721.1543">LocalFileStorage</text></a><!--MD5=[051e8226fcc48d8e599d150552079f92]
class FileBuilderFactory--><a href="../com/adform/streamloader/file/FileBuilderFactory.html" target="_top" title="FileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileBuilderFactory.html" xlink:show="new" xlink:title="FileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="492.5" y="443"/><ellipse cx="507.5" cy="459" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M503.4219,454.7656 L503.4219,452.6094 L510.8125,452.6094 L510.8125,454.7656 L508.3438,454.7656 L508.3438,462.8438 L510.8125,462.8438 L510.8125,465 L503.4219,465 L503.4219,462.8438 L505.8906,462.8438 L505.8906,454.7656 L503.4219,454.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="111" x="521.5" y="463.1543">FileBuilderFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="493.5" x2="634.5" y1="475" y2="475"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="498.5" y="489.2104">newFileBuilder()</text></a><!--MD5=[cc1331afeb9cf476565b0dc4a08c51ca]
class CsvFileBuilderFactory--><a href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" target="_top" title="CsvFileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" xlink:show="new" xlink:title="CsvFileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="482.5" y="592"/><ellipse cx="497.5" cy="608" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M500.4688,613.6406 Q499.8906,613.9375 499.25,614.0781 Q498.6094,614.2344 497.9063,614.2344 Q495.4063,614.2344 494.0781,612.5938 Q492.7656,610.9375 492.7656,607.8125 Q492.7656,604.6875 494.0781,603.0313 Q495.4063,601.375 497.9063,601.375 Q498.6094,601.375 499.25,601.5313 Q499.9063,601.6875 500.4688,601.9844 L500.4688,604.7031 Q499.8438,604.125 499.25,603.8594 Q498.6563,603.5781 498.0313,603.5781 Q496.6875,603.5781 496,604.6563 Q495.3125,605.7188 495.3125,607.8125 Q495.3125,609.9063 496,610.9844 Q496.6875,612.0469 498.0313,612.0469 Q498.6563,612.0469 499.25,611.7813 Q499.8438,611.5 500.4688,610.9219 L500.4688,613.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="511.5" y="612.1543">CsvFileBuilderFactory</text></a><!--MD5=[15d68002af953f443c2152312c4d6fee]
reverse link StreamLoader to KafkaSource--><path d="M267.8,83.81 C244.34,110.19 214.78,143.41 194.75,165.93 " fill="none" id="StreamLoader&lt;-KafkaSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="276.47,74.07,269.4933,75.8938,268.4935,83.0353,275.4702,81.2115,276.47,74.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b46f7ef06798f2dd9c5b9c0f710961aa]
reverse link StreamLoader to Sink--><path d="M342.25,83.87 C356.03,99.36 371.9,117.2 386.71,133.84 " fill="none" id="StreamLoader&lt;-Sink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="333.53,74.07,334.5298,81.2115,341.5065,83.0353,340.5067,75.8938,333.53,74.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aebf189094af19e6947d4ebbca5c7469]
reverse link Sink to FileSink--><path d="M438,271.32 C438,285.52 438,299.38 438,310.65 " fill="none" id="Sink&lt;-FileSink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="431,271.25,438,251.25,445,271.25,431,271.25" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1d5132d57b54cd4b57716737983cdbd7]
reverse link FileSink to FileStorage--><path d="M403.72,373.87 C388.77,389.3 371.06,407.56 355.22,423.91 " fill="none" id="FileSink&lt;-FileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="413.11,364.18,406.0617,365.7038,404.7575,372.796,411.8057,371.2722,413.11,364.18" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8fa25a7fb6cc8aa1ea161989513f2ed6]
reverse link FileStorage to InDataOffsetFileStorage--><path d="M224.44,525.83 C193.95,545.1 161.2,565.8 136.4,581.47 " fill="none" id="FileStorage&lt;-InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="220.93,519.77,241.57,515.01,228.4,531.61,220.93,519.77" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cb3167a77c562c157cb892280bd105e2]
reverse link FileStorage to TwoPhaseCommitFileStorage--><path d="M319.14,535.49 C320.64,549.13 322.16,562.95 323.46,574.75 " fill="none" id="FileStorage&lt;-TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="312.14,535.84,316.91,515.2,326.05,534.31,312.14,535.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c2f98d4fb2f620e50544eedade24087a]
reverse link TwoPhaseCommitFileStorage to LocalFileStorage--><path d="M327,661.14 C327,675.7 327,690.39 327,700.9 " fill="none" id="TwoPhaseCommitFileStorage&lt;-LocalFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="320,661.1,327,641.1,334,661.1,320,661.1" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b2480f81cc6dc473444105ce0b81fc1]
reverse link FileBuilderFactory to CsvFileBuilderFactory--><path d="M564,516.27 C564,542.57 564,573.88 564,592 " fill="none" id="FileBuilderFactory&lt;-CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="557,516.17,564,496.17,571,516.17,557,516.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a80cb40359b69890ff40286cc0bac71b]
reverse link FileSink to FileBuilderFactory--><path d="M472.18,373.76 C493.33,395.59 520.02,423.12 539.16,442.87 " fill="none" id="FileSink&lt;-FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="462.89,364.18,464.1943,371.2722,471.2425,372.796,469.9383,365.7038,462.89,364.18" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[83512477730401325003f057f7a59150]
@startuml
skinparam backgroundColor transparent

hide empty members

class StreamLoader [[../com/adform/streamloader/StreamLoader.html{StreamLoader}]] {
 start()
 stop()
}

class KafkaSource [[../com/adform/streamloader/KafkaSource.html{KafkaSource}]] {
  poll(): Kafka records
}

StreamLoader *- - KafkaSource
StreamLoader *- - Sink

interface Sink [[../com/adform/streamloader/Sink.html{Sink}]] {
  initialize(kafkaContext)
  assignPartitions(partitions): committed stream positions
  revokePartitions(partitions): committed stream positions
  write(record)
  heartbeat()
  close()
}

Sink <|- - FileSink

class FileSink [[../com/adform/streamloader/file/FileSink.html{FileSink}]] {
  partitionGrouping: TopicPartition => String
}

interface FileStorage [[../com/adform/streamloader/file/storage/FileStorage.html{FileStorage}]] {
  initialize(kafkaContext)
  recover()
  commitFile(file, offsets)
  committedPositions(partitions): stream positions
}

FileSink *- - FileStorage

FileStorage <|- - InDataOffsetFileStorage
FileStorage <|- - TwoPhaseCommitFileStorage

abstract class InDataOffsetFileStorage [[../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html{InDataOffsetFileStorage}]] {
  storeFile(file)
}

abstract class TwoPhaseCommitFileStorage [[../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html{TwoPhaseCommitFileStorage}]] {
  stageFile(file): staging
  storeFile(staging)
}

class LocalFileStorage [[../com/adform/streamloader/file/storage/LocalFileStorage.html{LocalFileStorage}]]

TwoPhaseCommitFileStorage <|- - LocalFileStorage

interface FileBuilderFactory [[../com/adform/streamloader/file/FileBuilderFactory.html{FileBuilderFactory}]] {
  newFileBuilder()
}

class CsvFileBuilderFactory [[../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html{CsvFileBuilderFactory}]]

FileBuilderFactory <|- - CsvFileBuilderFactory

FileSink *- - FileBuilderFactory

@enduml

PlantUML version 1.2020.09(Sun May 10 13:51:06 EEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_242-b08
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>