<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="751px" preserveAspectRatio="none" style="width:667px;height:751px;background:#00000000;" version="1.1" viewBox="0 0 667 751" width="667px" zoomAndPan="magnify"><defs><filter height="300%" id="f3hmc2ms3qxe7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[553662192d0d888fd585c6d5962c390b]
class StreamLoader--><a href="../com/adform/streamloader/StreamLoader.html" target="_top" title="StreamLoader" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/StreamLoader.html" xlink:show="new" xlink:title="StreamLoader" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="StreamLoader" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="247.5" y="7"/><ellipse cx="262.5" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M265.4688,28.6406 Q264.8906,28.9375 264.25,29.0781 Q263.6094,29.2344 262.9063,29.2344 Q260.4063,29.2344 259.0781,27.5938 Q257.7656,25.9375 257.7656,22.8125 Q257.7656,19.6875 259.0781,18.0313 Q260.4063,16.375 262.9063,16.375 Q263.6094,16.375 264.25,16.5313 Q264.9063,16.6875 265.4688,16.9844 L265.4688,19.7031 Q264.8438,19.125 264.25,18.8594 Q263.6563,18.5781 263.0313,18.5781 Q261.6875,18.5781 261,19.6563 Q260.3125,20.7188 260.3125,22.8125 Q260.3125,24.9063 261,25.9844 Q261.6875,27.0469 263.0313,27.0469 Q263.6563,27.0469 264.25,26.7813 Q264.8438,26.5 265.4688,25.9219 L265.4688,28.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="276.5" y="27.1543">StreamLoader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="248.5" x2="366.5" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="253.5" y="53.2104">start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="253.5" y="66.0151">stop()</text></a><!--MD5=[13bffe78371c1c8886d9a05fce9fab64]
class KafkaSource--><a href="../com/adform/streamloader/KafkaSource.html" target="_top" title="KafkaSource" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/KafkaSource.html" xlink:show="new" xlink:title="KafkaSource" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="KafkaSource" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="111" y="165"/><ellipse cx="133.65" cy="181" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M136.6188,186.6406 Q136.0406,186.9375 135.4,187.0781 Q134.7594,187.2344 134.0563,187.2344 Q131.5563,187.2344 130.2281,185.5938 Q128.9156,183.9375 128.9156,180.8125 Q128.9156,177.6875 130.2281,176.0313 Q131.5563,174.375 134.0563,174.375 Q134.7594,174.375 135.4,174.5313 Q136.0563,174.6875 136.6188,174.9844 L136.6188,177.7031 Q135.9938,177.125 135.4,176.8594 Q134.8063,176.5781 134.1813,176.5781 Q132.8375,176.5781 132.15,177.6563 Q131.4625,178.7188 131.4625,180.8125 Q131.4625,182.9063 132.15,183.9844 Q132.8375,185.0469 134.1813,185.0469 Q134.8063,185.0469 135.4,184.7813 Q135.9938,184.5 136.6188,183.9219 L136.6188,186.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="149.35" y="185.1543">KafkaSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="112" x2="237" y1="197" y2="197"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="117" y="211.2104">poll(): Kafka records</text></a><!--MD5=[bb0076f36699579ceee0ebce73764b72]
class Sink--><a href="../com/adform/streamloader/Sink.html" target="_top" title="Sink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/Sink.html" xlink:show="new" xlink:title="Sink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="116.8281" id="Sink" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="273" y="133"/><ellipse cx="423.25" cy="149" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M419.1719,144.7656 L419.1719,142.6094 L426.5625,142.6094 L426.5625,144.7656 L424.0938,144.7656 L424.0938,152.8438 L426.5625,152.8438 L426.5625,155 L419.1719,155 L419.1719,152.8438 L421.6406,152.8438 L421.6406,144.7656 L419.1719,144.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="26" x="443.75" y="153.1543">Sink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="274" x2="607" y1="165" y2="165"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="279" y="179.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="279" y="192.0151">assignPartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="279" y="204.8198">revokePartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="279" y="217.6245">write(record)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="279" y="230.4292">heartbeat()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="279" y="243.2339">close()</text></a><!--MD5=[30e4d2ee8532d5e65a7e7139bdb5ba17]
class FileSink--><a href="../com/adform/streamloader/file/FileSink.html" target="_top" title="FileSink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileSink.html" xlink:show="new" xlink:title="FileSink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileSink" style="stroke: #A80036; stroke-width: 1.5;" width="256" x="312.5" y="310"/><ellipse cx="412.75" cy="326" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M415.7188,331.6406 Q415.1406,331.9375 414.5,332.0781 Q413.8594,332.2344 413.1563,332.2344 Q410.6563,332.2344 409.3281,330.5938 Q408.0156,328.9375 408.0156,325.8125 Q408.0156,322.6875 409.3281,321.0313 Q410.6563,319.375 413.1563,319.375 Q413.8594,319.375 414.5,319.5313 Q415.1563,319.6875 415.7188,319.9844 L415.7188,322.7031 Q415.0938,322.125 414.5,321.8594 Q413.9063,321.5781 413.2813,321.5781 Q411.9375,321.5781 411.25,322.6563 Q410.5625,323.7188 410.5625,325.8125 Q410.5625,327.9063 411.25,328.9844 Q411.9375,330.0469 413.2813,330.0469 Q413.9063,330.0469 414.5,329.7813 Q415.0938,329.5 415.7188,328.9219 L415.7188,331.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="433.25" y="330.1543">FileSink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="313.5" x2="567.5" y1="342" y2="342"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="318.5" y="356.2104">partitionGrouping: TopicPartition =&gt; String</text></a><!--MD5=[4559e451c9ce63b7bac6a4b27b898818]
class FileStorage--><a href="../com/adform/streamloader/file/storage/FileStorage.html" target="_top" title="FileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/FileStorage.html" xlink:show="new" xlink:title="FileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="91.2188" id="FileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="170" y="423"/><ellipse cx="275.75" cy="439" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M271.6719,434.7656 L271.6719,432.6094 L279.0625,432.6094 L279.0625,434.7656 L276.5938,434.7656 L276.5938,442.8438 L279.0625,442.8438 L279.0625,445 L271.6719,445 L271.6719,442.8438 L274.1406,442.8438 L274.1406,434.7656 L271.6719,434.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="296.25" y="443.1543">FileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="171" x2="460" y1="455" y2="455"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="176" y="469.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="176" y="482.0151">recover()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="176" y="494.8198">commitFile(file, offsets)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="176" y="507.6245">committedPositions(partitions): stream positions</text></a><!--MD5=[2aa31e69067119087dfb94d8fcd9459c]
class InDataOffsetFileStorage--><a href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" target="_top" title="InDataOffsetFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" xlink:show="new" xlink:title="InDataOffsetFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="7" y="580.5"/><ellipse cx="22" cy="596.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M22.1094,591.8438 L20.9531,596.9219 L23.2813,596.9219 L22.1094,591.8438 Z M20.625,589.6094 L23.6094,589.6094 L26.9688,602 L24.5156,602 L23.75,598.9375 L20.4688,598.9375 L19.7188,602 L17.2813,602 L20.625,589.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="149" x="36" y="600.6543">InDataOffsetFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="187" y1="612.5" y2="612.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="13" y="626.7104">storeFile(file)</text></a><!--MD5=[488022651e633c44504f67c9abfc605a]
class TwoPhaseCommitFileStorage--><a href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" target="_top" title="TwoPhaseCommitFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" xlink:show="new" xlink:title="TwoPhaseCommitFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="223.5" y="574"/><ellipse cx="238.5" cy="590" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M238.6094,585.3438 L237.4531,590.4219 L239.7813,590.4219 L238.6094,585.3438 Z M237.125,583.1094 L240.1094,583.1094 L243.4688,595.5 L241.0156,595.5 L240.25,592.4375 L236.9688,592.4375 L236.2188,595.5 L233.7813,595.5 L237.125,583.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="252.5" y="594.1543">TwoPhaseCommitFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="224.5" x2="434.5" y1="606" y2="606"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="229.5" y="620.2104">stageFile(file): staging</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="229.5" y="633.0151">storeFile(staging)</text></a><!--MD5=[6b4f901cc76541060ec59946271318ef]
class LocalFileStorage--><a href="../com/adform/streamloader/file/storage/LocalFileStorage.html" target="_top" title="LocalFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/LocalFileStorage.html" xlink:show="new" xlink:title="LocalFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="LocalFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="262" y="700"/><ellipse cx="277" cy="716" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M279.9688,721.6406 Q279.3906,721.9375 278.75,722.0781 Q278.1094,722.2344 277.4063,722.2344 Q274.9063,722.2344 273.5781,720.5938 Q272.2656,718.9375 272.2656,715.8125 Q272.2656,712.6875 273.5781,711.0313 Q274.9063,709.375 277.4063,709.375 Q278.1094,709.375 278.75,709.5313 Q279.4063,709.6875 279.9688,709.9844 L279.9688,712.7031 Q279.3438,712.125 278.75,711.8594 Q278.1563,711.5781 277.5313,711.5781 Q276.1875,711.5781 275.5,712.6563 Q274.8125,713.7188 274.8125,715.8125 Q274.8125,717.9063 275.5,718.9844 Q276.1875,720.0469 277.5313,720.0469 Q278.1563,720.0469 278.75,719.7813 Q279.3438,719.5 279.9688,718.9219 L279.9688,721.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="291" y="720.1543">LocalFileStorage</text></a><!--MD5=[051e8226fcc48d8e599d150552079f92]
class FileBuilderFactory--><a href="../com/adform/streamloader/file/FileBuilderFactory.html" target="_top" title="FileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileBuilderFactory.html" xlink:show="new" xlink:title="FileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="495.5" y="442"/><ellipse cx="510.5" cy="458" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M506.4219,453.7656 L506.4219,451.6094 L513.8125,451.6094 L513.8125,453.7656 L511.3438,453.7656 L511.3438,461.8438 L513.8125,461.8438 L513.8125,464 L506.4219,464 L506.4219,461.8438 L508.8906,461.8438 L508.8906,453.7656 L506.4219,453.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="110" x="524.5" y="462.1543">FileBuilderFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="496.5" x2="636.5" y1="474" y2="474"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="501.5" y="488.2104">newFileBuilder()</text></a><!--MD5=[cc1331afeb9cf476565b0dc4a08c51ca]
class CsvFileBuilderFactory--><a href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" target="_top" title="CsvFileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" xlink:show="new" xlink:title="CsvFileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="485" y="591"/><ellipse cx="500" cy="607" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M502.9688,612.6406 Q502.3906,612.9375 501.75,613.0781 Q501.1094,613.2344 500.4063,613.2344 Q497.9063,613.2344 496.5781,611.5938 Q495.2656,609.9375 495.2656,606.8125 Q495.2656,603.6875 496.5781,602.0313 Q497.9063,600.375 500.4063,600.375 Q501.1094,600.375 501.75,600.5313 Q502.4063,600.6875 502.9688,600.9844 L502.9688,603.7031 Q502.3438,603.125 501.75,602.8594 Q501.1563,602.5781 500.5313,602.5781 Q499.1875,602.5781 498.5,603.6563 Q497.8125,604.7188 497.8125,606.8125 Q497.8125,608.9063 498.5,609.9844 Q499.1875,611.0469 500.5313,611.0469 Q501.1563,611.0469 501.75,610.7813 Q502.3438,610.5 502.9688,609.9219 L502.9688,612.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="514" y="611.1543">CsvFileBuilderFactory</text></a><!--MD5=[15d68002af953f443c2152312c4d6fee]
reverse link StreamLoader to KafkaSource--><path d="M269.4514,83.3411 C246.3661,109.6375 217.6433,142.3556 197.869,164.8804 " fill="none" id="StreamLoader&lt;-KafkaSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="278.3126,73.2473,271.3482,75.1174,270.3958,82.2653,277.3602,80.3952,278.3126,73.2473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b46f7ef06798f2dd9c5b9c0f710961aa]
reverse link StreamLoader to Sink--><path d="M345.3218,83.0828 C358.9444,98.6002 374.5529,116.3799 389.136,132.9913 " fill="none" id="StreamLoader&lt;-Sink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="336.6874,73.2473,337.6398,80.3952,344.6042,82.2653,343.6518,75.1174,336.6874,73.2473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aebf189094af19e6947d4ebbca5c7469]
reverse link Sink to FileSink--><path d="M440.5,270.2511 C440.5,284.5456 440.5,298.5136 440.5,309.91 " fill="none" id="Sink&lt;-FileSink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="433.5001,270.0591,440.5,250.0591,447.5001,270.0591,433.5001,270.0591" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1d5132d57b54cd4b57716737983cdbd7]
reverse link FileSink to FileStorage--><path d="M406.0128,372.9185 C391.3916,388.3585 374.1915,406.5218 358.734,422.8449 " fill="none" id="FileSink&lt;-FileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="415.2044,363.2122,408.1745,364.8184,406.9533,371.9254,413.9832,370.3192,415.2044,363.2122" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8fa25a7fb6cc8aa1ea161989513f2ed6]
reverse link FileStorage to InDataOffsetFileStorage--><path d="M226.8094,524.847 C196.5497,544.0716 164.1252,564.6716 139.3144,580.4344 " fill="none" id="FileStorage&lt;-InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="223.1817,518.8585,243.8167,514.0419,230.6893,530.6754,223.1817,518.8585" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cb3167a77c562c157cb892280bd105e2]
reverse link FileStorage to TwoPhaseCommitFileStorage--><path d="M322.1656,534.4415 C323.5383,548.0213 324.9281,561.7711 326.1234,573.5958 " fill="none" id="FileStorage&lt;-TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="315.1699,534.8365,320.1229,514.2339,329.0989,533.4285,315.1699,534.8365" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c2f98d4fb2f620e50544eedade24087a]
reverse link TwoPhaseCommitFileStorage to LocalFileStorage--><path d="M329.5,660.7383 C329.5,675.0384 329.5,689.4085 329.5,699.9093 " fill="none" id="TwoPhaseCommitFileStorage&lt;-LocalFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="322.5001,660.2959,329.5,640.2959,336.5001,660.2958,322.5001,660.2959" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b2480f81cc6dc473444105ce0b81fc1]
reverse link FileBuilderFactory to CsvFileBuilderFactory--><path d="M566.5,515.2318 C566.5,541.3757 566.5,572.3246 566.5,590.7732 " fill="none" id="FileBuilderFactory&lt;-CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="559.5001,515.2042,566.5,495.2042,573.5001,515.2042,559.5001,515.2042" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a80cb40359b69890ff40286cc0bac71b]
reverse link FileSink to FileBuilderFactory--><path d="M475.1648,372.8155 C496.0137,394.6572 522.0924,421.9777 541.0399,441.8276 " fill="none" id="FileSink&lt;-FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="465.998,363.2122,467.2474,370.3142,474.2837,371.8925,473.0343,364.7904,465.998,363.2122" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3194c5e4a13fe9b642a7a9d73bd381c4]
@startuml
skinparam backgroundColor transparent

hide empty members

class StreamLoader [[../com/adform/streamloader/StreamLoader.html{StreamLoader}]] {
 start()
 stop()
}

class KafkaSource [[../com/adform/streamloader/KafkaSource.html{KafkaSource}]] {
  poll(): Kafka records
}

StreamLoader *- - KafkaSource
StreamLoader *- - Sink

interface Sink [[../com/adform/streamloader/Sink.html{Sink}]] {
  initialize(kafkaContext)
  assignPartitions(partitions): committed stream positions
  revokePartitions(partitions): committed stream positions
  write(record)
  heartbeat()
  close()
}

Sink <|- - FileSink

class FileSink [[../com/adform/streamloader/file/FileSink.html{FileSink}]] {
  partitionGrouping: TopicPartition => String
}

interface FileStorage [[../com/adform/streamloader/file/storage/FileStorage.html{FileStorage}]] {
  initialize(kafkaContext)
  recover()
  commitFile(file, offsets)
  committedPositions(partitions): stream positions
}

FileSink *- - FileStorage

FileStorage <|- - InDataOffsetFileStorage
FileStorage <|- - TwoPhaseCommitFileStorage

abstract class InDataOffsetFileStorage [[../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html{InDataOffsetFileStorage}]] {
  storeFile(file)
}

abstract class TwoPhaseCommitFileStorage [[../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html{TwoPhaseCommitFileStorage}]] {
  stageFile(file): staging
  storeFile(staging)
}

class LocalFileStorage [[../com/adform/streamloader/file/storage/LocalFileStorage.html{LocalFileStorage}]]

TwoPhaseCommitFileStorage <|- - LocalFileStorage

interface FileBuilderFactory [[../com/adform/streamloader/file/FileBuilderFactory.html{FileBuilderFactory}]] {
  newFileBuilder()
}

class CsvFileBuilderFactory [[../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html{CsvFileBuilderFactory}]]

FileBuilderFactory <|- - CsvFileBuilderFactory

FileSink *- - FileBuilderFactory

@enduml

PlantUML version 1.2020.14(Sat Jun 20 14:14:34 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>