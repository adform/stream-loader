<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="744px" preserveAspectRatio="none" style="width:658px;height:744px;background:#00000000;" version="1.1" viewBox="0 0 658 744" width="658px" zoomAndPan="magnify"><defs><filter height="300%" id="f3hmc2ms3qxe7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[553662192d0d888fd585c6d5962c390b]
class StreamLoader--><a href="../com/adform/streamloader/StreamLoader.html" target="_top" title="StreamLoader" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/StreamLoader.html" xlink:show="new" xlink:title="StreamLoader" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="StreamLoader" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="246.5" y="8"/><ellipse cx="261.5" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M264.4688,29.6406 Q263.8906,29.9375 263.25,30.0781 Q262.6094,30.2344 261.9063,30.2344 Q259.4063,30.2344 258.0781,28.5938 Q256.7656,26.9375 256.7656,23.8125 Q256.7656,20.6875 258.0781,19.0313 Q259.4063,17.375 261.9063,17.375 Q262.6094,17.375 263.25,17.5313 Q263.9063,17.6875 264.4688,17.9844 L264.4688,20.7031 Q263.8438,20.125 263.25,19.8594 Q262.6563,19.5781 262.0313,19.5781 Q260.6875,19.5781 260,20.6563 Q259.3125,21.7188 259.3125,23.8125 Q259.3125,25.9063 260,26.9844 Q260.6875,28.0469 262.0313,28.0469 Q262.6563,28.0469 263.25,27.7813 Q263.8438,27.5 264.4688,26.9219 L264.4688,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="275.5" y="28.1543">StreamLoader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="247.5" x2="365.5" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="252.5" y="54.2104">start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="252.5" y="67.0151">stop()</text></a><!--MD5=[13bffe78371c1c8886d9a05fce9fab64]
class KafkaSource--><a href="../com/adform/streamloader/KafkaSource.html" target="_top" title="KafkaSource" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/KafkaSource.html" xlink:show="new" xlink:title="KafkaSource" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="KafkaSource" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="110" y="166"/><ellipse cx="132.65" cy="182" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M135.6188,187.6406 Q135.0406,187.9375 134.4,188.0781 Q133.7594,188.2344 133.0563,188.2344 Q130.5563,188.2344 129.2281,186.5938 Q127.9156,184.9375 127.9156,181.8125 Q127.9156,178.6875 129.2281,177.0313 Q130.5563,175.375 133.0563,175.375 Q133.7594,175.375 134.4,175.5313 Q135.0563,175.6875 135.6188,175.9844 L135.6188,178.7031 Q134.9938,178.125 134.4,177.8594 Q133.8063,177.5781 133.1813,177.5781 Q131.8375,177.5781 131.15,178.6563 Q130.4625,179.7188 130.4625,181.8125 Q130.4625,183.9063 131.15,184.9844 Q131.8375,186.0469 133.1813,186.0469 Q133.8063,186.0469 134.4,185.7813 Q134.9938,185.5 135.6188,184.9219 L135.6188,187.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="148.35" y="186.1543">KafkaSource</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="111" x2="236" y1="198" y2="198"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="116" y="212.2104">poll(): Kafka records</text></a><!--MD5=[bb0076f36699579ceee0ebce73764b72]
class Sink--><a href="../com/adform/streamloader/Sink.html" target="_top" title="Sink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/Sink.html" xlink:show="new" xlink:title="Sink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="116.8281" id="Sink" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="272" y="134"/><ellipse cx="422.25" cy="150" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M418.1719,145.7656 L418.1719,143.6094 L425.5625,143.6094 L425.5625,145.7656 L423.0938,145.7656 L423.0938,153.8438 L425.5625,153.8438 L425.5625,156 L418.1719,156 L418.1719,153.8438 L420.6406,153.8438 L420.6406,145.7656 L418.1719,145.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="26" x="442.75" y="154.1543">Sink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="273" x2="606" y1="166" y2="166"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="278" y="180.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="278" y="193.0151">assignPartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="323" x="278" y="205.8198">revokePartitions(partitions): committed stream positions</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="278" y="218.6245">write(record)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="278" y="231.4292">heartbeat()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="278" y="244.2339">close()</text></a><!--MD5=[30e4d2ee8532d5e65a7e7139bdb5ba17]
class FileSink--><a href="../com/adform/streamloader/file/FileSink.html" target="_top" title="FileSink" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileSink.html" xlink:show="new" xlink:title="FileSink" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileSink" style="stroke: #A80036; stroke-width: 1.5;" width="256" x="311.5" y="311"/><ellipse cx="411.75" cy="327" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M414.7188,332.6406 Q414.1406,332.9375 413.5,333.0781 Q412.8594,333.2344 412.1563,333.2344 Q409.6563,333.2344 408.3281,331.5938 Q407.0156,329.9375 407.0156,326.8125 Q407.0156,323.6875 408.3281,322.0313 Q409.6563,320.375 412.1563,320.375 Q412.8594,320.375 413.5,320.5313 Q414.1563,320.6875 414.7188,320.9844 L414.7188,323.7031 Q414.0938,323.125 413.5,322.8594 Q412.9063,322.5781 412.2813,322.5781 Q410.9375,322.5781 410.25,323.6563 Q409.5625,324.7188 409.5625,326.8125 Q409.5625,328.9063 410.25,329.9844 Q410.9375,331.0469 412.2813,331.0469 Q412.9063,331.0469 413.5,330.7813 Q414.0938,330.5 414.7188,329.9219 L414.7188,332.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="432.25" y="331.1543">FileSink</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="312.5" x2="566.5" y1="343" y2="343"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="317.5" y="357.2104">partitionGrouping: TopicPartition =&gt; String</text></a><!--MD5=[4559e451c9ce63b7bac6a4b27b898818]
class FileStorage--><a href="../com/adform/streamloader/file/storage/FileStorage.html" target="_top" title="FileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/FileStorage.html" xlink:show="new" xlink:title="FileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="91.2188" id="FileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="291" x="169" y="424"/><ellipse cx="274.75" cy="440" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M270.6719,435.7656 L270.6719,433.6094 L278.0625,433.6094 L278.0625,435.7656 L275.5938,435.7656 L275.5938,443.8438 L278.0625,443.8438 L278.0625,446 L270.6719,446 L270.6719,443.8438 L273.1406,443.8438 L273.1406,435.7656 L270.6719,435.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="71" x="295.25" y="444.1543">FileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="170" x2="459" y1="456" y2="456"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="175" y="470.2104">initialize(kafkaContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="175" y="483.0151">recover()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="175" y="495.8198">commitFile(file, offsets)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="175" y="508.6245">committedPositions(partitions): stream positions</text></a><!--MD5=[2aa31e69067119087dfb94d8fcd9459c]
class InDataOffsetFileStorage--><a href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" target="_top" title="InDataOffsetFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html" xlink:show="new" xlink:title="InDataOffsetFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="6" y="581.5"/><ellipse cx="21" cy="597.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M21.1094,592.8438 L19.9531,597.9219 L22.2813,597.9219 L21.1094,592.8438 Z M19.625,590.6094 L22.6094,590.6094 L25.9688,603 L23.5156,603 L22.75,599.9375 L19.4688,599.9375 L18.7188,603 L16.2813,603 L19.625,590.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="149" x="35" y="601.6543">InDataOffsetFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="186" y1="613.5" y2="613.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="12" y="627.7104">storeFile(file)</text></a><!--MD5=[488022651e633c44504f67c9abfc605a]
class TwoPhaseCommitFileStorage--><a href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" target="_top" title="TwoPhaseCommitFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html" xlink:show="new" xlink:title="TwoPhaseCommitFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="65.6094" id="TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="222.5" y="575"/><ellipse cx="237.5" cy="591" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M237.6094,586.3438 L236.4531,591.4219 L238.7813,591.4219 L237.6094,586.3438 Z M236.125,584.1094 L239.1094,584.1094 L242.4688,596.5 L240.0156,596.5 L239.25,593.4375 L235.9688,593.4375 L235.2188,596.5 L232.7813,596.5 L236.125,584.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="180" x="251.5" y="595.1543">TwoPhaseCommitFileStorage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="223.5" x2="433.5" y1="607" y2="607"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="228.5" y="621.2104">stageFile(file): staging</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="228.5" y="634.0151">storeFile(staging)</text></a><!--MD5=[6b4f901cc76541060ec59946271318ef]
class LocalFileStorage--><a href="../com/adform/streamloader/file/storage/LocalFileStorage.html" target="_top" title="LocalFileStorage" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/storage/LocalFileStorage.html" xlink:show="new" xlink:title="LocalFileStorage" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="LocalFileStorage" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="261" y="701"/><ellipse cx="276" cy="717" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M278.9688,722.6406 Q278.3906,722.9375 277.75,723.0781 Q277.1094,723.2344 276.4063,723.2344 Q273.9063,723.2344 272.5781,721.5938 Q271.2656,719.9375 271.2656,716.8125 Q271.2656,713.6875 272.5781,712.0313 Q273.9063,710.375 276.4063,710.375 Q277.1094,710.375 277.75,710.5313 Q278.4063,710.6875 278.9688,710.9844 L278.9688,713.7031 Q278.3438,713.125 277.75,712.8594 Q277.1563,712.5781 276.5313,712.5781 Q275.1875,712.5781 274.5,713.6563 Q273.8125,714.7188 273.8125,716.8125 Q273.8125,718.9063 274.5,719.9844 Q275.1875,721.0469 276.5313,721.0469 Q277.1563,721.0469 277.75,720.7813 Q278.3438,720.5 278.9688,719.9219 L278.9688,722.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="290" y="721.1543">LocalFileStorage</text></a><!--MD5=[051e8226fcc48d8e599d150552079f92]
class FileBuilderFactory--><a href="../com/adform/streamloader/file/FileBuilderFactory.html" target="_top" title="FileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/file/FileBuilderFactory.html" xlink:show="new" xlink:title="FileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="52.8047" id="FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="494.5" y="443"/><ellipse cx="509.5" cy="459" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M505.4219,454.7656 L505.4219,452.6094 L512.8125,452.6094 L512.8125,454.7656 L510.3438,454.7656 L510.3438,462.8438 L512.8125,462.8438 L512.8125,465 L505.4219,465 L505.4219,462.8438 L507.8906,462.8438 L507.8906,454.7656 L505.4219,454.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="110" x="523.5" y="463.1543">FileBuilderFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="495.5" x2="635.5" y1="475" y2="475"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="500.5" y="489.2104">newFileBuilder()</text></a><!--MD5=[cc1331afeb9cf476565b0dc4a08c51ca]
class CsvFileBuilderFactory--><a href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" target="_top" title="CsvFileBuilderFactory" xlink:actuate="onRequest" xlink:href="../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html" xlink:show="new" xlink:title="CsvFileBuilderFactory" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f3hmc2ms3qxe7)" height="32" id="CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.5;" width="163" x="484" y="592"/><ellipse cx="499" cy="608" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M501.9688,613.6406 Q501.3906,613.9375 500.75,614.0781 Q500.1094,614.2344 499.4063,614.2344 Q496.9063,614.2344 495.5781,612.5938 Q494.2656,610.9375 494.2656,607.8125 Q494.2656,604.6875 495.5781,603.0313 Q496.9063,601.375 499.4063,601.375 Q500.1094,601.375 500.75,601.5313 Q501.4063,601.6875 501.9688,601.9844 L501.9688,604.7031 Q501.3438,604.125 500.75,603.8594 Q500.1563,603.5781 499.5313,603.5781 Q498.1875,603.5781 497.5,604.6563 Q496.8125,605.7188 496.8125,607.8125 Q496.8125,609.9063 497.5,610.9844 Q498.1875,612.0469 499.5313,612.0469 Q500.1563,612.0469 500.75,611.7813 Q501.3438,611.5 501.9688,610.9219 L501.9688,613.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="513" y="612.1543">CsvFileBuilderFactory</text></a><!--MD5=[15d68002af953f443c2152312c4d6fee]
reverse link StreamLoader to KafkaSource--><path d="M268.4514,84.3411 C245.3661,110.6375 216.6433,143.3556 196.869,165.8804 " fill="none" id="StreamLoader&lt;-KafkaSource" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="277.3126,74.2473,270.3482,76.1174,269.3958,83.2653,276.3602,81.3952,277.3126,74.2473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b46f7ef06798f2dd9c5b9c0f710961aa]
reverse link StreamLoader to Sink--><path d="M344.3218,84.0828 C357.9444,99.6002 373.5529,117.3799 388.136,133.9913 " fill="none" id="StreamLoader&lt;-Sink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="335.6874,74.2473,336.6398,81.3952,343.6042,83.2653,342.6518,76.1174,335.6874,74.2473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aebf189094af19e6947d4ebbca5c7469]
reverse link Sink to FileSink--><path d="M439.5,271.2511 C439.5,285.5456 439.5,299.5136 439.5,310.91 " fill="none" id="Sink&lt;-FileSink" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="432.5001,271.0591,439.5,251.0591,446.5001,271.0591,432.5001,271.0591" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1d5132d57b54cd4b57716737983cdbd7]
reverse link FileSink to FileStorage--><path d="M405.0128,373.9185 C390.3916,389.3585 373.1915,407.5218 357.734,423.8449 " fill="none" id="FileSink&lt;-FileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="414.2044,364.2122,407.1745,365.8184,405.9533,372.9254,412.9832,371.3192,414.2044,364.2122" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8fa25a7fb6cc8aa1ea161989513f2ed6]
reverse link FileStorage to InDataOffsetFileStorage--><path d="M225.8094,525.847 C195.5497,545.0716 163.1252,565.6716 138.3144,581.4344 " fill="none" id="FileStorage&lt;-InDataOffsetFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="222.1817,519.8585,242.8167,515.0419,229.6893,531.6754,222.1817,519.8585" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cb3167a77c562c157cb892280bd105e2]
reverse link FileStorage to TwoPhaseCommitFileStorage--><path d="M321.1656,535.4415 C322.5383,549.0213 323.9281,562.7711 325.1234,574.5958 " fill="none" id="FileStorage&lt;-TwoPhaseCommitFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="314.1699,535.8365,319.1229,515.2339,328.0989,534.4285,314.1699,535.8365" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c2f98d4fb2f620e50544eedade24087a]
reverse link TwoPhaseCommitFileStorage to LocalFileStorage--><path d="M328.5,661.7383 C328.5,676.0384 328.5,690.4085 328.5,700.9093 " fill="none" id="TwoPhaseCommitFileStorage&lt;-LocalFileStorage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="321.5001,661.2959,328.5,641.2959,335.5001,661.2958,321.5001,661.2959" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4b2480f81cc6dc473444105ce0b81fc1]
reverse link FileBuilderFactory to CsvFileBuilderFactory--><path d="M565.5,516.2318 C565.5,542.3757 565.5,573.3246 565.5,591.7732 " fill="none" id="FileBuilderFactory&lt;-CsvFileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="558.5001,516.2042,565.5,496.2042,572.5001,516.2042,558.5001,516.2042" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a80cb40359b69890ff40286cc0bac71b]
reverse link FileSink to FileBuilderFactory--><path d="M474.1648,373.8155 C495.0137,395.6572 521.0924,422.9777 540.0399,442.8276 " fill="none" id="FileSink&lt;-FileBuilderFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="464.998,364.2122,466.2474,371.3142,473.2837,372.8925,472.0343,365.7904,464.998,364.2122" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[eeb0c0dc267efcdbf9daebe528a54cb6]
@startuml
skinparam backgroundColor transparent

hide empty members

class StreamLoader [[../com/adform/streamloader/StreamLoader.html{StreamLoader}]] {
 start()
 stop()
}

class KafkaSource [[../com/adform/streamloader/KafkaSource.html{KafkaSource}]] {
  poll(): Kafka records
}

StreamLoader *- - KafkaSource
StreamLoader *- - Sink

interface Sink [[../com/adform/streamloader/Sink.html{Sink}]] {
  initialize(kafkaContext)
  assignPartitions(partitions): committed stream positions
  revokePartitions(partitions): committed stream positions
  write(record)
  heartbeat()
  close()
}

Sink <|- - FileSink

class FileSink [[../com/adform/streamloader/file/FileSink.html{FileSink}]] {
  partitionGrouping: TopicPartition => String
}

interface FileStorage [[../com/adform/streamloader/file/storage/FileStorage.html{FileStorage}]] {
  initialize(kafkaContext)
  recover()
  commitFile(file, offsets)
  committedPositions(partitions): stream positions
}

FileSink *- - FileStorage

FileStorage <|- - InDataOffsetFileStorage
FileStorage <|- - TwoPhaseCommitFileStorage

abstract class InDataOffsetFileStorage [[../com/adform/streamloader/file/storage/InDataOffsetFileStorage.html{InDataOffsetFileStorage}]] {
  storeFile(file)
}

abstract class TwoPhaseCommitFileStorage [[../com/adform/streamloader/file/storage/TwoPhaseCommitFileStorage.html{TwoPhaseCommitFileStorage}]] {
  stageFile(file): staging
  storeFile(staging)
}

class LocalFileStorage [[../com/adform/streamloader/file/storage/LocalFileStorage.html{LocalFileStorage}]]

TwoPhaseCommitFileStorage <|- - LocalFileStorage

interface FileBuilderFactory [[../com/adform/streamloader/file/FileBuilderFactory.html{FileBuilderFactory}]] {
  newFileBuilder()
}

class CsvFileBuilderFactory [[../com/adform/streamloader/encoding/csv/CsvFileBuilderFactory.html{CsvFileBuilderFactory}]]

FileBuilderFactory <|- - CsvFileBuilderFactory

FileSink *- - FileBuilderFactory

@enduml

PlantUML version 1.2020.09(Sun May 10 10:51:06 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_252-b14
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>